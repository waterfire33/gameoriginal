(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function i(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(n){if(n.ep)return;n.ep=!0;const l=i(n);fetch(n.href,l)}})();const m=document.getElementById("game");m.style.fontFamily="Arial, sans-serif";m.style.maxWidth="800px";m.style.margin="0 auto";m.style.padding="20px";const v={A1:{name:"Beginner",description:"Basic ability to understand short, simple words and phrases.",skills:["Understand very basic vocabulary","Introduce themselves","Answer simple personal questions","Understand slow, clear speech"],definition_rules:{max_sentence_length:8,max_word_length:8,allowed_concepts:["basic nouns","basic verbs","everyday objects","simple adjectives"],avoid:["abstract ideas","technical terms","complex grammar"],language_style:"simple, slow, concrete"}},A2:{name:"Elementary",description:"Can understand common phrases and describe simple events.",skills:["Understand everyday expressions","Describe past and present events","Communicate simple needs"],definition_rules:{max_sentence_length:12,max_word_length:10,allowed_concepts:["daily routines","shopping","family","school","simple past actions"],avoid:["advanced vocabulary","figurative language"],language_style:"familiar, simple, short sentences"}},B1:{name:"Intermediate",description:"Can understand main ideas of clear speech and handle common situations.",skills:["Understand straightforward conversations","Write simple paragraphs","Discuss opinions and plans"],definition_rules:{max_sentence_length:18,max_word_length:12,allowed_concepts:["opinions","dreams","plans","work situations","travel situations"],avoid:["specialized academic words","complex idioms"],language_style:"clear, direct, everyday English"}},B2:{name:"Upper Intermediate",description:"Can understand more complex texts and interact fluently.",skills:["Understand abstract or technical topics","Speak fluently with native speakers","Write detailed essays","Argue a point of view"],definition_rules:{max_sentence_length:25,max_word_length:14,allowed_concepts:["abstract ideas","academic topics","nuance"],avoid:["very rare vocabulary"],language_style:"fluent, precise, well-structured"}},C1:{name:"Advanced",description:"Can use English naturally, fluently, and with academic/professional tone.",skills:["Understand complex, long texts","Use academic or professional vocabulary","Express ideas naturally and precisely","Write advanced, structured texts"],definition_rules:{max_sentence_length:40,max_word_length:20,allowed_concepts:["academic language","professional terms","complex syntax"],avoid:["none unless extremely specialized"],language_style:"high-level, nuanced, analytical"}}};let c=[],h=[],_="A1",r=null,p=null,f=new Set;function S(){if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance("excellent");window.speechSynthesis.speak(t)}}const d=document.createElement("div");d.style.textAlign="center";d.style.marginBottom="20px";const b=document.createElement("h1");b.textContent="Vocabulary Matching Game";b.style.color="white";d.appendChild(b);const g=document.createElement("label");g.textContent="Enter words (one per line):";g.style.display="block";g.style.color="white";g.style.marginBottom="10px";d.appendChild(g);const x=document.createElement("textarea");x.rows=10;x.cols=50;x.placeholder=`apple
banana
cherry
...`;d.appendChild(x);const y=document.createElement("label");y.textContent="English Level:";y.style.display="block";y.style.color="white";y.style.marginTop="20px";y.style.marginBottom="10px";d.appendChild(y);const w=document.createElement("select");w.style.marginBottom="20px";Object.keys(v).forEach(t=>{const e=document.createElement("option");e.value=t,e.textContent=`${t} - ${v[t].name}`,w.appendChild(e)});d.appendChild(w);const o=document.createElement("button");o.textContent="Start Game";o.style.padding="10px 20px";o.style.fontSize="16px";o.style.cursor="pointer";o.style.backgroundColor="blue";o.style.color="white";o.style.border="none";o.style.borderRadius="5px";o.addEventListener("click",A);d.appendChild(o);const u=document.createElement("div");u.style.color="white";u.style.textAlign="center";u.style.marginTop="20px";d.appendChild(u);m.appendChild(d);async function A(){const t=x.value.trim();if(!t){u.textContent="Please enter some words.";return}if(c=t.split(`
`).map(e=>e.trim()).filter(e=>e),_=w.value,c.length<2){u.textContent="Please enter at least 2 words.";return}u.textContent="Fetching definitions...",o.disabled=!0;try{h=[];for(const e of c){const i=await B(e,_);if(i)h.push(i);else{u.textContent=`Could not find definition for "${e}".`,o.disabled=!1;return}}u.textContent="",D()}catch{u.textContent="Error fetching definitions. Please try again.",o.disabled=!1}}function k(t,e,i){const s=v[t].definition_rules;let n=e;const l=n.split(/[.!?]+/).filter(a=>a.trim());if(l.length>0){let a=l[0].trim();a=a.split(/\s+/).slice(0,s.max_sentence_length).join(" "),t==="A1"&&(a=a.replace(/[^a-zA-Z\s]/g,"").toLowerCase()),n=a}return n}async function B(t,e){try{const i=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${t}`);if(!i.ok)return null;const s=await i.json();if(!s[0]||!s[0].meanings||!s[0].meanings[0])return null;const n=s[0].meanings[0].definitions[0].definition;return k(e,n,t)}catch{return null}}function D(){d.style.display="none",r=document.createElement("div"),r.style.display="flex",r.style.justifyContent="space-between",r.style.alignItems="center",r.style.height="600px";const t=document.createElement("div");t.style.display="grid",t.style.gridTemplateColumns=`repeat(${Math.ceil(c.length/3)}, 120px)`,t.style.gridTemplateRows="repeat(3, 120px)",t.style.gap="10px";const e=document.createElement("div");e.style.display="grid",e.style.gridTemplateColumns=`repeat(${Math.ceil(c.length/3)}, 120px)`,e.style.gridTemplateRows="repeat(3, 120px)",e.style.gap="10px";const i=[...Array(c.length).keys()].sort(()=>Math.random()-.5),s=[...Array(h.length).keys()].sort(()=>Math.random()-.5);i.forEach((n,l)=>{const a=E("word",n,c[n]);t.appendChild(a)}),s.forEach((n,l)=>{const a=E("definition",n,h[n]);e.appendChild(a)}),r.appendChild(t),r.appendChild(e),m.appendChild(r)}function E(t,e,i){const s=document.createElement("div");return s.style.width="120px",s.style.height="120px",s.style.backgroundColor=L(),s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.cursor="pointer",s.style.borderRadius="10px",s.style.fontSize="14px",s.style.fontWeight="bold",s.style.textAlign="center",s.style.padding="5px",s.style.boxSizing="border-box",s.style.color="transparent",s.textContent=i,s.addEventListener("click",()=>q(t,e,s)),s}function L(){const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE"];return t[Math.floor(Math.random()*t.length)]}function q(t,e,i){if(!f.has(t==="word"?e:e+c.length))if(p===null)p={type:t,index:e},i.style.color="black";else{if(p.type===t&&p.index===e)return;i.style.color="black",setTimeout(()=>{p.type!==t&&p.index===e?(S(),f.add(p.index),f.add(e+(t==="definition"?c.length:0)),r.querySelectorAll('div[style*="cursor: pointer"]').forEach(n=>{const l=n.textContent||"",a=c.includes(l)?"word":"definition",C=a==="word"?c.indexOf(l):h.indexOf(l);(a===p.type&&C===p.index||a===t&&C===e)&&(n.style.display="none")})):r.querySelectorAll('div[style*="cursor: pointer"]').forEach(n=>{n.style.color==="black"&&(n.style.color="transparent")}),p=null,f.size===c.length*2&&setTimeout(()=>{alert("Congratulations! You matched all pairs!"),F()},500)},1e3)}}function F(){r&&(m.removeChild(r),r=null),d.style.display="block",o.disabled=!1,u.textContent="",f.clear(),p=null}
